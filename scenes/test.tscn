[gd_scene load_steps=19 format=2]

[ext_resource path="res://assets/models/road_gen/road-template-basin1.mesh" type="ArrayMesh" id=1]
[ext_resource path="res://scripts/track/auto_road.gd" type="Script" id=2]
[ext_resource path="res://characters/player_cart.tscn" type="PackedScene" id=3]
[ext_resource path="res://icon.png" type="Texture" id=4]
[ext_resource path="res://characters/player_camera.tscn" type="PackedScene" id=5]
[ext_resource path="res://characters/npc_cart.tscn" type="PackedScene" id=6]
[ext_resource path="res://track/marker.tscn" type="PackedScene" id=7]
[ext_resource path="res://scripts/track/race_manager.gd" type="Script" id=8]
[ext_resource path="res://ui/race_status.gd" type="Script" id=9]

[sub_resource type="ProceduralSky" id=1]
sky_top_color = Color( 0.129412, 0.509804, 1, 1 )
sky_curve = 0.0998613

[sub_resource type="Environment" id=2]
background_mode = 2
background_sky = SubResource( 1 )
ambient_light_color = Color( 0.596078, 0.596078, 0.596078, 1 )
ambient_light_sky_contribution = 0.48
tonemap_mode = 3

[sub_resource type="SphereMesh" id=3]
radius = 0.5
height = 1.0
radial_segments = 8
rings = 8

[sub_resource type="SpatialMaterial" id=4]
albedo_color = Color( 0.34902, 1, 0.482353, 1 )

[sub_resource type="SpatialMaterial" id=5]
albedo_color = Color( 1, 0, 0.984314, 1 )

[sub_resource type="SpatialMaterial" id=6]
albedo_color = Color( 0.772549, 0.772549, 0.772549, 1 )
metallic = 1.0
roughness = 0.0

[sub_resource type="Curve3D" id=8]
_data = {
"points": PoolVector3Array( -45.5331, 41.9137, 108.523, 45.5331, -41.9137, -108.523, 171.384, 36.3539, -210.274, 61.7282, 2.07407, 25.7717, -61.7282, -2.07407, -25.7717, 63.1714, 29.2444, -623.832, 17.7378, 5.93922, -91.6074, -17.7378, -5.93922, 91.6074, -448.101, -33.9611, -478.31, -162.301, 3.15832, -3.7713, 162.301, -3.15832, 3.7713, 0.055366, 0.0253022, -0.00670886, -57.9944, -34.4389, 122.146, 57.9944, 34.4389, -122.146, 165.458, 38.5742, -188.774 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0 )
}

[sub_resource type="SpatialMaterial" id=9]
albedo_color = Color( 0.4, 0.4, 0.4, 1 )
metallic_texture = ExtResource( 4 )
metallic_texture_channel = 2
roughness_texture = ExtResource( 4 )

[sub_resource type="BoxShape" id=10]
extents = Vector3( 3.62629, 11.8252, 19.5752 )

[node name="Spatial" type="Spatial"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 48.6763, 0 )
script = ExtResource( 8 )
laps = 3
racers = [ NodePath("player_cart"), NodePath("npc_cart2"), NodePath("npc_cart3"), NodePath("npc_cart") ]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 2 )

[node name="DirectionalLight" type="DirectionalLight" parent="WorldEnvironment"]
transform = Transform( 0.255328, 0.966855, 4.05728e-10, 0.28302, -0.0747401, 0.956198, 0.924504, -0.244144, -0.292722, -1.04484, 52.6328, 0 )
shadow_enabled = true

[node name="player_cart" parent="." instance=ExtResource( 3 )]
transform = Transform( -0.0240482, 0, -0.999711, 0, 1, 0, 0.999711, 0, -0.0240482, -2.6983, 1.19508, -3.71737 )
racer_name = "Kitty"
target_node = NodePath("../AutoRoad/marker")

[node name="npc_cart" parent="." instance=ExtResource( 6 )]
transform = Transform( -5.21243e-05, 0, -1, 0, 1, 0, 1, 0, -5.21243e-05, 0.9784, 1.20195, 2.48395 )
racer_name = "Janice"
target_node = NodePath("../AutoRoad/marker")

[node name="MeshInstance" type="MeshInstance" parent="npc_cart"]
transform = Transform( 1, 0, 2.91038e-11, 0, 1, 0, -2.91038e-11, 0, 1, 9.29832e-06, 0.592423, 0.177851 )
mesh = SubResource( 3 )
material/0 = SubResource( 4 )

[node name="npc_cart2" parent="." instance=ExtResource( 6 )]
transform = Transform( -5.21243e-05, 0, -1, 0, 1, 0, 1, 0, -5.21243e-05, 0.9784, 1.20195, -0.536665 )
racer_name = "Nathaniel"
target_node = NodePath("../AutoRoad/marker")

[node name="MeshInstance" type="MeshInstance" parent="npc_cart2"]
transform = Transform( 1, 0, 2.91038e-11, 0, 1, 0, -2.91038e-11, 0, 1, 9.29832e-06, 0.592423, 0.177851 )
mesh = SubResource( 3 )
material/0 = SubResource( 5 )

[node name="npc_cart3" parent="." instance=ExtResource( 6 )]
transform = Transform( -5.21243e-05, 0, -1, 0, 1, 0, 1, 0, -5.21243e-05, 0.9784, 1.20195, -4.93124 )
racer_name = "Fergeson"
target_node = NodePath("../AutoRoad/marker")

[node name="MeshInstance" type="MeshInstance" parent="npc_cart3"]
transform = Transform( 1, 0, 3.63798e-11, 0, 1, 0, -3.63798e-11, 0, 1, -0.0131683, 0.575838, 0.197621 )
mesh = SubResource( 3 )
material/0 = SubResource( 6 )

[node name="player_camera" parent="." instance=ExtResource( 5 )]
transform = Transform( -0.103209, 0, -0.99466, 0, 1, 0, 0.99466, 0, -0.103209, 0, 2.06887, 0.275277 )
body_node = NodePath("../npc_cart")

[node name="AutoRoad" type="Path" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.43487, 0, 0 )
curve = SubResource( 8 )
script = ExtResource( 2 )
template_mesh = ExtResource( 1 )
material = SubResource( 9 )
template_transform = Transform( 1, 0, 0, 0, 0.5, 0, 0, 0, 1, 0, 0, 0 )

[node name="marker" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.834963, 0, 0.550306, 0, 1, 0, -0.550306, 0, 0.834963, 92.6915, 1.70587, -15.4336 )
next_marker = NodePath("../marker2")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 1.14684, 8.21017, 1.46986 )
shape = SubResource( 10 )

[node name="marker2" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.343611, 0, 0.939112, 0, 1, 0, -0.939112, 0, 0.343611, 172.775, 37.0163, -218.753 )
next_marker = NodePath("../marker3")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker2"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, 8.21017, 0 )
shape = SubResource( 10 )

[node name="marker3" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( -0.215161, 0, 0.976578, 0, 1, 0, -0.976578, 0, -0.215161, 175.667, 17.8847, -387.188 )
next_marker = NodePath("../marker4")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker3"]
transform = Transform( 1, 0, 4.47035e-08, 0, 1, 0, -4.47035e-08, 0, 1, 0.654175, 8.21017, -2.96913 )
shape = SubResource( 10 )

[node name="marker4" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( -0.797616, 0, 0.603166, 0, 1, 0, -0.603166, 0, -0.797616, 80.822, 30.5037, -618.203 )
next_marker = NodePath("../marker5")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker4"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.162476, 8.36163, -1.57562 )
shape = SubResource( 10 )

[node name="marker5" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( -0.982726, 0, -0.185066, 0, 1, 0, 0.185066, 0, -0.982726, -110.96, 14.2147, -617.832 )
next_marker = NodePath("../marker6")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker5"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0.906998, 8.21017, -4.81622 )
shape = SubResource( 10 )

[node name="marker6" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( -0.900706, 0, -0.43443, 0, 1, 0, 0.43443, 0, -0.900706, -305.125, -10.1509, -566.288 )
next_marker = NodePath("../marker7")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker6"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, 8.21017, 0 )
shape = SubResource( 10 )

[node name="marker7" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( -0.813902, 0, -0.581001, 0, 1, 0, 0.581001, 0, -0.813902, -423.347, -27.9734, -513.902 )
next_marker = NodePath("../marker10")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker7"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.212921, 8.21017, -1.51636 )
shape = SubResource( 10 )

[node name="marker10" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.14793, 0, -0.988998, 0, 1, 0, 0.988998, 0, 0.14793, -452.466, -33.9751, -443.211 )
next_marker = NodePath("../marker11")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker10"]
transform = Transform( 1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0.212891, 8.21017, -6.63788 )
shape = SubResource( 10 )

[node name="marker11" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.520533, 0, -0.853841, 0, 1, 0, 0.853841, 0, 0.520533, -400.004, -28.2555, -351.515 )
next_marker = NodePath("../marker8")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker11"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.21286, 8.21017, 0.224213 )
shape = SubResource( 10 )

[node name="marker8" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.718758, 0, -0.695261, 0, 1, 0, 0.695261, 0, 0.718758, -256.394, -9.92571, -170.16 )
next_marker = NodePath("../marker9")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker8"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, 8.21017, 0 )
shape = SubResource( 10 )

[node name="marker9" parent="AutoRoad" instance=ExtResource( 7 )]
transform = Transform( 0.969093, 0, -0.246695, 0, 1, 0, 0.246695, 0, 0.969093, -19.3193, 2.46745, -1.79703 )
next_marker = NodePath("../marker")

[node name="CollisionShape3" type="CollisionShape" parent="AutoRoad/marker9"]
transform = Transform( 1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, 8.21017, 0 )
shape = SubResource( 10 )

[node name="Panel" type="Panel" parent="."]
margin_right = 155.0
margin_bottom = 139.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Label" type="Label" parent="Panel"]
margin_left = 5.0
margin_top = 5.0
margin_right = 150.0
margin_bottom = 19.0
text = "Racers"

[node name="VBoxContainer" type="VBoxContainer" parent="Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 24.0
margin_right = -5.0
margin_bottom = -5.0
script = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[connection signal="ranking_changed" from="." to="Panel/VBoxContainer" method="_on_ranking_changed"]
